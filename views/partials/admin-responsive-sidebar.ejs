<!-- views/partials/admin-responsive-sidebar.ejs -->
<!-- Barra de Navegação Superior Móvel -->
<nav class="navbar navbar-expand-md navbar-dark d-md-none mobile-navbar">
    <div class="container-fluid">
        <div class="d-flex align-items-center">
            <button class="btn btn-link text-white p-0 me-3" type="button" id="sidebarToggle">
                <i class="bi bi-list" style="font-size: 1.5rem;"></i>
            </button>
            <!-- Logo e Nome da Empresa para Móvel -->
        </div>
    </div>
</nav>

<!-- Overlay para a barra lateral móvel -->
<div class="sidebar-overlay d-md-none" id="sidebarOverlay"></div>

<!-- Barra Lateral de Administração -->
<nav class="col-md-2 sidebar d-flex flex-column" id="adminSidebar">
    <div class="sidebar-header text-center">
        <!-- Seção do Logo -->
    </div>
    
    <!-- Links de Navegação -->
    <div class="nav-wrapper">
        <!-- Dashboard -->
        <a href="/admin/dashboard" class="<%= typeof page !== 'undefined' && page === 'dashboard' ? 'active' : '' %>">
            <i class="bi bi-house-door-fill"></i> Dashboard
        </a>

        <!-- Seção de Rede -->
        <h6 class="nav-section-title">Rede</h6>
        <a href="/admin/billing/mapping-new" class="<%= typeof page !== 'undefined' && page === 'mapping-new' ? 'active' : '' %>">
            <i class="bi bi-map-fill"></i> Mapa da Rede
        </a>
        <a href="/admin/cable-network/analytics" class="<%= typeof page !== 'undefined' && page === 'cable-network-analytics' ? 'active' : '' %>">
            <i class="bi bi-bar-chart-line-fill"></i> Análise da Rede
        </a>
        <a href="/admin/cable-network/odp" class="<%= typeof page !== 'undefined' && page === 'cable-network-odp' ? 'active' : '' %>">
            <i class="bi bi-broadcast"></i> Gerenciar ODP
        </a>
        <a href="/admin/cable-network/cables" class="<%= typeof page !== 'undefined' && page === 'cable-network-cables' ? 'active' : '' %>">
            <i class="bi bi-diagram-3-fill"></i> Rotas de Cabos
        </a>

        <!-- Seção de Operações -->
        <h6 class="nav-section-title">Operações</h6>
        <a href="/admin/installations" class="<%= typeof page !== 'undefined' && page === 'installations' ? 'active' : '' %>">
            <i class="bi bi-tools"></i> Instalações
        </a>
        <a href="/admin/trouble" class="<%= typeof page !== 'undefined' && page === 'trouble' ? 'active' : '' %>">
            <i class="bi bi-exclamation-triangle-fill"></i> Chamados Técnicos
        </a>

        <!-- Seção de Faturamento -->
        <h6 class="nav-section-title">Faturamento</h6>
        <a href="/admin/billing/dashboard" class="<%= typeof page !== 'undefined' && page === 'billing' ? 'active' : '' %>">
            <i class="bi bi-receipt-cutoff"></i> Painel de Faturas
        </a>

        <!-- Seção de Administração -->
        <h6 class="nav-section-title">Administração</h6>
        <a href="/admin/agents" class="<%= typeof page !== 'undefined' && page === 'agents' ? 'active' : '' %>">
            <i class="bi bi-person-badge-fill"></i> Agentes
        </a>
        <a href="/admin/agent-registrations" class="<%= typeof page !== 'undefined' && page === 'agent-registrations' ? 'active' : '' %>">
            <i class="bi bi-person-plus-fill"></i> Cadastros de Agentes
        </a>
        <a href="/admin/technicians" class="<%= typeof page !== 'undefined' && page === 'technicians' ? 'active' : '' %>">
            <i class="bi bi-people-fill"></i> Técnicos
        </a>
        
        <!-- Seção de Equipamentos -->
        <h6 class="nav-section-title">Equipamentos</h6>
        <a href="/admin/genieacs" class="<%= typeof page !== 'undefined' && page === 'genieacs' ? 'active' : '' %>">
            <i class="bi bi-hdd-network-fill"></i> GenieACS
        </a>
        <a href="/admin/mikrotik" class="<%= typeof page !== 'undefined' && page === 'mikrotik' ? 'active' : '' %>">
            <i class="bi bi-router-fill"></i> PPPoE
        </a>
         <a href="/admin/mikrotik/profiles" class="<%= typeof page !== 'undefined' && page === 'mikrotik-profiles' ? 'active' : '' %>">
            <i class="bi bi-person-badge"></i> Planos PPPoE
        </a>
        <a href="/admin/hotspot" class="<%= typeof page !== 'undefined' && page === 'hotspot' ? 'active' : '' %>">
            <i class="bi bi-wifi"></i> Hotspot
        </a>
        <a href="/admin/hotspot/voucher" class="<%= typeof page !== 'undefined' && page === 'voucher' ? 'active' : '' %>">
            <i class="bi bi-ticket-perforated-fill"></i> Vouchers Hotspot
        </a>
        <a href="/admin/mikrotik/hotspot-profiles" class="<%= typeof page !== 'undefined' && page === 'hotspot-profiles' ? 'active' : '' %>">
            <i class="bi bi-wifi"></i> Planos Hotspot
        </a>
       
        <!-- Configurações e Logout -->
        <h6 class="nav-section-title">Sistema</h6>
        <a href="/admin/settings" class="<%= typeof page !== 'undefined' && page === 'setting' ? 'active' : '' %>">
            <i class="bi bi-gear-fill"></i> Configurações
        </a>
        <a href="/admin/cache" class="<%= typeof page !== 'undefined' && page === 'cache' ? 'active' : '' %>">
            <i class="bi bi-database-fill-lock"></i> Gerenciar Cache
        </a>
        <a href="/admin/logout">
            <i class="bi bi-box-arrow-right"></i> Sair
        </a>
    </div>

    <!-- Painel de Versão e Atualizações -->
    <div class="version-panel">
        <!-- Conteúdo do painel de versão -->
    </div>
</nav>

<style>
    /* Estilos Gerais da Barra Lateral */
    .sidebar {
        background-color: #2c3e50; /* Cor de fundo mais escura e profissional */
        color: #ecf0f1; /* Cor de texto clara */
        position: fixed;
        top: 0;
        left: 0;
        height: 100vh;
        overflow-y: auto;
        z-index: 1000;
    }

    .sidebar a {
        color: #ecf0f1;
        text-decoration: none;
        display: block;
        padding: 12px 24px;
        transition: background-color 0.3s, padding-left 0.3s;
    }

    .sidebar a:hover {
        background-color: #34495e; /* Cor de fundo ao passar o mouse */
        padding-left: 28px; /* Leve deslocamento para a direita */
    }

    .sidebar a.active {
        background-color: #e67e22; /* Cor laranja para o link ativo */
        color: #ffffff;
        font-weight: 600;
    }

    .sidebar a i {
        margin-right: 12px;
        width: 20px; /* Alinhamento dos ícones */
    }

    /* Títulos das Seções de Navegação */
    .nav-section-title {
        font-size: 0.8rem;
        font-weight: 600;
        color: #95a5a6; /* Cor mais suave para os títulos */
        text-transform: uppercase;
        letter-spacing: 1px;
        padding: 20px 24px 10px 24px;
        margin-top: 10px;
    }
    
    .nav-wrapper {
        flex-grow: 1;
    }

    /* Estilos Responsivos */
    @media (max-width: 767.98px) {
        .main-content {
            margin-left: 0;
            padding-top: 70px; 
        }
        .sidebar {
            transform: translateX(-100%);
            transition: transform 0.3s ease;
        }
        .sidebar.show {
            transform: translateX(0);
        }
    }

    @media (min-width: 768px) {
        .main-content {
            margin-left: 16.666667%; /* Largura da coluna do sidebar */
        }
    }
</style>

<script>
    // Script para alternar a barra lateral em dispositivos móveis
    document.addEventListener('DOMContentLoaded', function() {
        const sidebarToggle = document.getElementById('sidebarToggle');
        const sidebar = document.getElementById('adminSidebar');
        const overlay = document.getElementById('sidebarOverlay');

        if (sidebarToggle) {
            sidebarToggle.addEventListener('click', () => {
                sidebar.classList.toggle('show');
                overlay.classList.toggle('show');
            });
        }
        
        if(overlay) {
            overlay.addEventListener('click', () => {
                sidebar.classList.remove('show');
                overlay.classList.remove('show');
            });
        }
    });
</script>
