<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Painel do Cliente | Portal Geniesoft</title>
  <link rel="manifest" href="/manifest.webmanifest">
  <meta name="theme-color" content="#0B1437">
  <link rel="apple-touch-icon" href="/img/icons/icon-192.png">
  <link rel="stylesheet" href="/css/pwa.css">
  <link rel="stylesheet" href="/css/customer-responsive.css">
  <script defer src="/js/pwa-install.js"></script>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
  <link href="https://cdn.datatables.net/1.13.6/css/dataTables.bootstrap5.min.css" rel="stylesheet">
  <link rel="stylesheet" href="/css/style.css">
  <style>
    :root { --primary-color: #4361ee; --card-border-radius: 16px; }
    body { background-color: #f0f2f5; font-family: 'Segoe UI', sans-serif; }
    .card { border: none; border-radius: var(--card-border-radius); box-shadow: 0 10px 30px rgba(0,0,0,0.05); }
    .stat-card { background: white; padding: 20px; border-left: 4px solid var(--primary-color); }
    .form-section { background: white; padding: 25px; }
  </style>
</head>
<body>
  <div class="main-container">
    <div class="container">
      <% if (typeof notif !== 'undefined' && notif) { %>
        <div class="alert alert-success alert-dismissible fade show" role="alert" id="notif-alert">
          <i class="bi bi-check-circle me-2"></i><%= notif %>
          <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
        </div>
      <% } %>

      <div class="row">
        <div class="col-12">
          <% if (typeof billingData !== 'undefined' && billingData && billingData.customer) { %>
            <div class="form-section mb-4">
              <h6><i class="bi bi-receipt"></i>Informações de Faturamento</h6>
              <div class="row">
                <div class="col-md-6">
                  <strong>Nome:</strong> <%= billingData.customer.name %><br>
                  <strong>Pacote:</strong> 
                  <% if (billingData.customer.package_name) { %>
                    <span class="badge bg-info">R$ <%= parseFloat(billingData.customer.package_price).toLocaleString('pt-BR') %></span>
                  <% } else { %>
                    <span class="text-muted">N/A</span>
                  <% } %>
                </div>
                <div class="col-md-6">
                  <strong>Status:</strong> 
                  <% if (billingData.customer.payment_status === 'paid') { %><span class="badge bg-success">Pago</span><% } else { %><span class="badge bg-warning">Pendente</span><% } %><br>
                  <strong>Total de Faturas:</strong> <%= billingData.invoices.length %>
                </div>
                <div class="mt-3">
                  <a href="/customer/billing/dashboard" class="btn btn-primary btn-sm">Ver Detalhes</a>
                </div>
              </div>
            </div>
          <% } %>

          <div class="form-section mb-4">
            <h6><i class="bi bi-router"></i>Informações do Dispositivo</h6>
            <div class="row">
                <div class="col-md-4"><div class="stat-card"><strong>Status:</strong> <% if (customer.status === 'Online') { %><span class="badge bg-success">Online</span><% } else { %><%= customer.status %><% } %></div></div>
                <div class="col-md-4"><div class="stat-card"><strong>SSID:</strong> <%= customer.ssid %></div></div>
                <div class="col-md-4"><div class="stat-card"><strong>IP PPPoE:</strong> <%= customer.pppoeIP %></div></div>
            </div>
          </div>
          
          <div class="form-section">
            <h6><i class="bi bi-gear-fill"></i>Configurações do Dispositivo</h6>
            <% if (customer.status === 'Online') { %>
              <div class="row">
                <div class="col-md-6 mb-3">
                  <label for="newSsid">Mudar Nome do WiFi (SSID)</label>
                  <div class="input-group"><input type="text" class="form-control" id="newSsid"><button class="btn btn-primary" id="changeSsidBtn">Alterar</button></div>
                </div>
                <div class="col-md-6 mb-3">
                  <label for="newPassword">Mudar Senha do WiFi</label>
                  <div class="input-group"><input type="text" class="form-control" id="newPassword"><button class="btn btn-primary" id="changePasswordBtn">Alterar</button></div>
                </div>
                <div class="col-12"><button class="btn btn-danger" id="restartDeviceBtn">Reiniciar Dispositivo</button></div>
              </div>
            <% } else { %>
              <div class="alert alert-warning">Dispositivo offline. Funcionalidades indisponíveis.</div>
            <% } %>
          </div>
        </div>
      </div>

      <footer class="footer mt-4">&copy; <%= new Date().getFullYear() %> Geniesoft</footer>
    </div>
  </div>

  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    // Script JS para interações de dashboard
    $(document).ready(function() {
      function showToast(type, title, message) {
        // implementação do toast
      }

      $('#changeSsidBtn').on('click', function() { /* ... */ });
      $('#changePasswordBtn').on('click', function() { /* ... */ });
      $('#restartDeviceBtn').on('click', function() { /* ... */ });
    });
  </script>
</body>
</html>
